{% extends 'reports/base.html' %}

{% block title %}Clusters - UIDAI Dashboard{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Page Header -->
    <div class="page-header">
        <h1><i class="bi bi-diagram-3-fill text-primary me-2"></i>District Clusters</h1>
        <p class="lead">Behavioral segmentation of districts across all three datasets</p>
    </div>

    <!-- Cluster Explanation -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="chart-card card">
                <div class="card-header bg-primary text-white">
                    <h6 class="m-0"><i class="bi bi-info-circle me-2"></i>About Clustering</h6>
                </div>
                <div class="card-body">
                    <p>Districts are segmented into <strong>5 behavioral clusters</strong> based on:</p>
                    <ul>
                        <li><strong>Volume</strong>: Total enrolments/updates</li>
                        <li><strong>Age Share</strong>: Minor vs adult composition</li>
                        <li><strong>Intensity</strong>: Updates per enrolment</li>
                        <li><strong>Volatility</strong>: Coefficient of variation</li>
                    </ul>
                    <p class="mb-0 text-muted">K-Means clustering (k=5) with StandardScaler normalization.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cluster Tables -->
    <div class="row">
        <div class="col-lg-4 mb-4">
            <div class="chart-card card h-100">
                <div class="card-header bg-warning text-dark">
                    <h6 class="m-0"><i class="bi bi-fingerprint me-2"></i>Biometric Clusters</h6>
                </div>
                <div class="card-body" style="max-height: 500px; overflow-y: auto;">
                    {{ bio_clusters|safe }}
                </div>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="chart-card card h-100">
                <div class="card-header bg-success text-white">
                    <h6 class="m-0"><i class="bi bi-file-text me-2"></i>Demographic Clusters</h6>
                </div>
                <div class="card-body" style="max-height: 500px; overflow-y: auto;">
                    {{ demo_clusters|safe }}
                </div>
            </div>
        </div>
        <div class="col-lg-4 mb-4">
            <div class="chart-card card h-100">
                <div class="card-header bg-primary text-white">
                    <h6 class="m-0"><i class="bi bi-person-plus me-2"></i>Enrolment Clusters</h6>
                </div>
                <div class="card-body" style="max-height: 500px; overflow-y: auto;">
                    {{ enrol_clusters|safe }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}