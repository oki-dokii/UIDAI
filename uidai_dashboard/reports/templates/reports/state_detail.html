{% extends 'reports/base.html' %}

{% block title %}{{ state_name }} - UIDAI Dashboard{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'dashboard' %}">Dashboard</a></li>
            <li class="breadcrumb-item active">{{ state_name }}</li>
        </ol>
    </nav>

    <!-- Page Header -->
    <div class="page-header">
        <h1><i class="bi bi-geo-alt-fill text-primary me-2"></i>{{ state_name }}</h1>
        <p class="lead">State-level analysis and district breakdown</p>
    </div>

    <!-- State Metrics -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="metric-card card border-left-primary h-100">
                <div class="card-body">
                    <div class="metric-label text-primary">Total Enrolments</div>
                    <div class="metric-value">{{ metrics.total_enrol|floatformat:0|default:"0" }}</div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="metric-card card border-left-success h-100">
                <div class="card-body">
                    <div class="metric-label text-success">Demo Updates</div>
                    <div class="metric-value">{{ metrics.total_demo|floatformat:0|default:"0" }}</div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="metric-card card border-left-warning h-100">
                <div class="card-body">
                    <div class="metric-label text-warning">Bio Updates</div>
                    <div class="metric-value">{{ metrics.total_bio|floatformat:0|default:"0" }}</div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="metric-card card border-left-info h-100">
                <div class="card-body">
                    <div class="metric-label text-info">Districts</div>
                    <div class="metric-value">{{ metrics.districts|default:"0" }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- District Table -->
    <div class="row">
        <div class="col-12">
            <div class="chart-card card">
                <div class="card-header">
                    <h6 class="m-0"><i class="bi bi-table me-2"></i>District Breakdown</h6>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        {{ districts|safe }}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}